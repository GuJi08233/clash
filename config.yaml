# æœºåœºè®¢é˜…
proxy-providers:
#  provider1:
#    type: http
#    interval: 360
#    health-check:
#      enable: true
#      url: https://www.gstatic.com/generate_204
#      interval: 300
#      proxy: ğŸŸ¢ ç›´è¿
#    url: https://provider
#    path: ./æœºåœºè®¢é˜…/provider.yaml
#    exclude-filter: æµé‡|è®¢é˜…|å»é™¤|å‰©ä½™|å¥—é¤|t.me|å®˜ç½‘|è¿‡æœŸ

# å…¨å±€é…ç½®
mixed-port: 7897
ipv6: true
mode: rule
unified-delay: true
tcp-concurrent: true
allow-lan: true
bind-address: "*"
log-level: warning

# æ§åˆ¶é¢æ¿
external-controller: 0.0.0.0:9097
secret: "oEyMp9>_ISg7P5;H[1#5f?W{Yct3a=ChkrNl-y22:E(WC;;,qTe,_q?!k_jPm9Qu"
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

# åŒ¹é…è¿›ç¨‹ always/strict/off
find-process-mode: strict
global-client-fingerprint: chrome
disable-keep-alive: false
keep-alive-idle: 600
keep-alive-interval: 15

# ç­–ç•¥ç»„é€‰æ‹©å’Œfakeipç¼“å­˜
profile:
  store-selected: true
  store-fake-ip: true
  
# DNS
dns:
  enable: true
  ipv6: true
  listen: ':1053'
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
  - "rule-set:fake_ip_filter"
  - "rule-set:private_domain"
  - "rule-set:cn_domain"
  - "rule-set:google_cn_domain"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 114.114.114.114
    - 1.1.1.1
  nameserver:
    - 8.8.8.8
    - 119.29.29.29
    - 223.6.6.6
    - 114.114.114.114
    - 1.1.1.1
# èŠ‚ç‚¹
proxies:
  - { name: ğŸŸ¢ ç›´è¿, type: direct, udp: true }
  - { name: ğŸ›‘ æ‹¦æˆª, type: reject, udp: true }

# ä»£ç†ç»„é”šç‚¹   
pg:
  pr1: &pr1 {type: select, lazy: true, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¹ğŸ‡¼ å°æ¹¾, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡°ğŸ‡· éŸ©å›½, ğŸŸ¢ ç›´è¿]}
  pr2: &pr2 {type: url-test, url: https://www.gstatic.com/generate_204, interval: 300, tolerance: 20, include-all: true, lazy: true, hidden: true}
  pr3: &pr3 {type: load-balance, strategy: round-robin, lazy: false, interval: 300, hidden: true, url: https://www.gstatic.com/generate_204}
  pr4: &pr4 {type: url-test, url: https://cp.cloudflare.com/generate_204, interval: 300, tolerance: 10, lazy: false, hidden: false}

# ä»£ç†ç»„
proxy-groups:
  - {name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¹ğŸ‡¼ å°æ¹¾, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡°ğŸ‡· éŸ©å›½]}
  - {name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true, exclude-type: Direct|Reject}
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, url: https://www.gstatic.com/generate_204, lazy: false, interval: 300, tolerance: 50, include-all: true, exclude-type: Direct|Reject}
  - {name: ğŸ® Steamåœ°åŒº,!!merge <<: *pr1}
  - {name: ğŸŒ Steamä¸‹è½½,!!merge <<: *pr1}
  - {name: ğŸ¤– chatGPT, include-all: true, filter: chatGPT,!!merge <<: *pr1}
  - {name: ğŸ“² ç”µæŠ¥ä¿¡æ¯,!!merge <<: *pr1}
  - {name: â“‚ï¸ å¾®è½¯æœåŠ¡,!!merge <<: *pr1}
  - {name: ğŸ è‹¹æœæœåŠ¡,!!merge <<: *pr1}
  - {name: ğŸµ TikTok,!!merge <<: *pr1}
  - {name: â–¶ï¸ Youtube,!!merge <<: *pr1}
  - {name: ğŸ“º Bilibili,!!merge <<: *pr1}
  - {name: ğŸŒ å›½å¤–ä»£ç†,!!merge <<: *pr1}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼,!!merge <<: *pr1}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯, filter: é¦™æ¸¯|HK,!!merge <<: *pr2}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾, filter: å°æ¹¾|TW, !!merge <<: *pr2}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, filter: æ–°åŠ å¡|SG,!!merge <<: *pr2}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬, filter: æ—¥æœ¬|JP,!!merge <<: *pr2}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½, filter: ç¾å›½|US,!!merge <<: *pr2}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½, filter: éŸ©å›½,!!merge <<: *pr2}

  
#è§„åˆ™é›†é”šç‚¹
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  qcy: &qcy {type: http, interval: 86400, behavior: domain, format: text}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
  
# è§„åˆ™é›†
rule-providers:
  # åŸŸå
  microsoft_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"}
  private_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"}
  telegram_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"}
  youtube_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"}
  google_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"}
  google_cn_domain: {!!merge <<: *class, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/classical/google@cn.list"}
  ai_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs"}
  tiktok_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs"}
  cn_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}
  microsoft@cn_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft@cn.mrs"}
  csdn_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/csdn.mrs"}
  gitee_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gitee.mrs"}
  gfw_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs"}
  geolocation-!cn: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"}
  apple@cn_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple@cn.mrs"}
  bilibili_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs"}
  fake_ip_filter: {!!merge <<: *qcy, url: "https://raw.githubusercontent.com/juewuy/ShellCrash/refs/heads/dev/public/fake_ip_filter.list"}
  # ip
  telegram_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"}
  google_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"}
  cn_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"}
  
# è§„åˆ™
rules:
  ##### åŸŸå
  # ç›´è¿
  - RULE-SET,private_domain,ğŸŸ¢ ç›´è¿
  # å¾®è½¯GitHub
  - RULE-SET,microsoft@cn_domain,ğŸŸ¢ ç›´è¿
  - RULE-SET,microsoft_domain,â“‚ï¸ å¾®è½¯æœåŠ¡
  # Bilibili
  - RULE-SET,bilibili_domain,ğŸ“º Bilibili
  # å›½å†…
  - RULE-SET,csdn_domain,ğŸŸ¢ ç›´è¿
  - RULE-SET,gitee_domain,ğŸŸ¢ ç›´è¿
  - RULE-SET,cn_domain,ğŸŸ¢ ç›´è¿
  # è°·æ­Œå›½å†…(å›½å†…ç›´è¿)
  - RULE-SET,google_cn_domain,ğŸŸ¢ ç›´è¿
  # AI
  - RULE-SET,ai_domain,ğŸ¤– chatGPT
  # telegram
  - RULE-SET,telegram_domain,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  # TikTok
  - RULE-SET,tiktok_domain,ğŸµ TikTok
  # Youtube
  - RULE-SET,youtube_domain,â–¶ï¸ Youtube
  # Steam
  # å›½å¤–ä»£ç†
  - DOMAIN-SUFFIX,steampowered.com,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN-SUFFIX,steamcommunity.com,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN-SUFFIX,steamstatic.com,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN-SUFFIX,steamusercontent.com,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN-SUFFIX,steam-chat.com,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN,steamcommunity-a.akamaihd.net,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN,steamuserimages-a.akamaihd.net,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN-SUFFIX,cloudflare.steamstatic.com,ğŸŒ å›½å¤–ä»£ç†
  - DOMAIN,edge.steam-dns.top.comcast.net,ğŸŒ å›½å¤–ä»£ç†
  # ç›´è¿
  - DOMAIN,steamcdn-a.akamaihd.net,ğŸŸ¢ ç›´è¿
  - DOMAIN-SUFFIX,cm.steampowered.com,ğŸŸ¢ ç›´è¿
  # Steam åœ°åŒºèŠ‚ç‚¹
  - DOMAIN-SUFFIX,steamserver.net,ğŸ® Steamåœ°åŒº
  # ä¸‹è½½èŠ‚ç‚¹
  - DOMAIN-SUFFIX,steamcontent.com,ğŸŒ Steamä¸‹è½½
  - DOMAIN,steampipe.akamaized.net,ğŸŒ Steamä¸‹è½½
  - DOMAIN-SUFFIX,gofile.io,ğŸŒ Steamä¸‹è½½
  # è‹¹æœæœåŠ¡
  - RULE-SET,apple@cn_domain,ğŸ è‹¹æœæœåŠ¡
  # å›½å¤–ä»£ç†
  - RULE-SET,google_domain,ğŸŒ å›½å¤–ä»£ç†
  - RULE-SET,gfw_domain,ğŸŒ å›½å¤–ä»£ç†
  - RULE-SET,geolocation-!cn,ğŸŒ å›½å¤–ä»£ç†
  ##### ip
  - RULE-SET,telegram_ip,ğŸ“² ç”µæŠ¥ä¿¡æ¯,no-resolve
  - RULE-SET,google_ip,ğŸŒ å›½å¤–ä»£ç†,no-resolve
  - RULE-SET,cn_ip,ğŸŸ¢ ç›´è¿
  
  # æœªåŒ¹é…
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼